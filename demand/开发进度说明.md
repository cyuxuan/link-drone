# 无人机供需撮合平台 · 开发进度说明

更新日期：2025-10-19

## 已实现功能

- 前端（H5 / UniApp）
  - 初始化并搭建 `drone-ui` 项目结构，完成首页与路由基础配置。
  - 启动 H5 开发服务器，预览地址：`http://localhost:8080/` 与同网段地址。

- 后端（微服务）基础骨架与启动配置
  - 父工程 `drone-system` 统一版本至 `0.0.1-SNAPSHOT`，Spring Boot `2.7.14`，Spring Cloud `2021.0.8`，Spring Cloud Alibaba `2021.0.5.0`。
  - 为各服务添加启动类与 `application.yml` 基础配置：
    - `drone-system-gateway`（端口 `8000`）
    - `drone-system-auth`（端口 `8001`）
    - `drone-system-user`（端口 `8002`，含 MySQL）
    - `drone-system-supply`（端口 `8003`，含 MySQL、MyBatis-Plus）
    - `drone-system-demand`（端口 `8004`，含 MySQL、MyBatis-Plus）
    - `drone-system-order`（端口 `8005`，含 MySQL、MyBatis-Plus）
    - `drone-system-payment`（端口 `8006`，含 MySQL、MyBatis-Plus）
    - `drone-system-message`（端口 `8007`，含 Redis）
    - `drone-system-file`（端口 `8008`，含上传大小限制）
    - `drone-system-search`（端口 `8009`，含 Elasticsearch 连接）
    - `drone-system-admin`（端口 `8010`，含 MySQL）
    - `drone-system-monitor`（端口 `8011`，开放 Actuator 与 Prometheus）

- 健康检查与联调能力
  - 所有服务均已提供 `GET /ping` 接口用于健康检测。
  - 网关统一路由前缀：`/api/<service>/**`，对接各服务 `GET /ping`（经 `StripPrefix=2` 转发为服务内 `/ping`）。

- 网关配置
  - 已配置到各核心服务的路由规则，并修复 `file` 路由缺失的 `StripPrefix=2`。
  - 启用全局 CORS（允许常用方法、任意来源、携带凭证），便于前端联调。
  - 开放管理端点：`/actuator/*`。

## 未实现功能（待办）

- 后端业务与接口
  - 认证服务：登录、令牌签发/刷新、登出、权限校验、用户注册等接口。
  - 用户/供给/需求/订单/支付等核心领域实体、DAO、Service、Controller 的业务实现与校验规则。
  - 搜索服务的索引初始化、数据同步与查询接口。
  - 文件服务的存储后端（如 MinIO/OSS）集成与上传/下载/鉴权策略。
  - 消息服务的消息流转（RocketMQ/Kafka）接入与消费逻辑。

- 网关与安全
  - 网关统一鉴权过滤器与白名单（如 `/auth/login`, `/auth/refresh`）。
  - 限流与熔断策略（RedisRateLimiter / Sentinel）。

- 数据层与中间件
  - 数据库建表与迁移脚本（Flyway/Liquibase）。
  - Redis、Elasticsearch、消息队列等中间件的环境准备与连接配置。

- 文档与测试
  - 接口文档（Knife4j/OpenAPI）配置与示例接口标注。
  - 单元测试与集成测试的基础框架与示例。

- 运维与部署
  - Maven/Gradle 聚合构建与本地启动脚本（因本机未安装 Maven，构建验证暂未执行）。
  - Docker / Docker Compose 部署编排（Nacos、MySQL、Redis、ES、各服务）。
  - 监控体系集成（Prometheus/Grafana 仪表盘、日志采集）。

- 前端完善
  - `tabBar`、全局网络请求封装、统一样式主题、环境区分与打包脚本。

## 备注与联调说明

- 启动依赖：Nacos（`127.0.0.1:8848`）、MySQL、Redis、Elasticsearch。
- 启动顺序建议：先启动 `gateway` 与 `auth`，再启动其他服务。
- 网关路由检查：`http://localhost:8000/actuator/gateway/routes`。
- 健康验证示例：`curl http://localhost:8000/api/user/ping`、`curl http://localhost:8000/api/demand/ping`。