<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>无人机供需撮合平台领域模型图</title>
    <style>
        body {
            font-family: 'Microsoft YaHei', Arial, sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
        }
        h1, h2, h3 {
            color: #2c3e50;
        }
        h1 {
            text-align: center;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
            margin-bottom: 30px;
        }
        h2 {
            border-bottom: 1px solid #ddd;
            padding-bottom: 5px;
            margin-top: 30px;
        }
        h3 {
            margin-top: 20px;
        }
        .domain-model-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }
        .entity {
            width: 280px;
            border: 2px solid #3498db;
            border-radius: 8px;
            overflow: hidden;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            background-color: white;
            transition: transform 0.3s ease;
            margin-bottom: 20px;
        }
        .entity:hover {
            transform: translateY(-5px);
            box-shadow: 0 6px 12px rgba(0,0,0,0.15);
        }
        .entity-header {
            background-color: #3498db;
            color: white;
            padding: 10px;
            text-align: center;
            font-weight: bold;
            font-size: 1.2em;
        }
        .entity-body {
            padding: 10px;
            max-height: 300px;
            overflow-y: auto;
        }
        .entity-attribute {
            padding: 5px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
        }
        .entity-attribute:last-child {
            border-bottom: none;
        }
        .attribute-name {
            font-weight: bold;
        }
        .attribute-type {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        .relationship-container {
            margin: 40px 0;
            position: relative;
        }
        .relationship-diagram {
            width: 100%;
            height: 600px;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            position: relative;
            overflow: hidden;
        }
        .rules-container {
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 20px;
            margin: 30px 0;
        }
        .rule-category {
            margin-bottom: 20px;
        }
        .rule-list {
            list-style-type: circle;
            padding-left: 20px;
        }
        .rule-list li {
            margin-bottom: 8px;
        }
        .application-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: space-between;
            margin: 30px 0;
        }
        .application-item {
            width: 30%;
            background-color: white;
            border: 1px solid #ddd;
            border-radius: 8px;
            padding: 15px;
            margin-bottom: 20px;
            box-shadow: 0 2px 4px rgba(0,0,0,0.05);
        }
        .application-item h4 {
            color: #3498db;
            margin-top: 0;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 20px;
            border-top: 1px solid #ddd;
            color: #7f8c8d;
            font-size: 0.9em;
        }
        .table-container {
            overflow-x: auto;
            margin: 20px 0;
        }
        table {
            width: 100%;
            border-collapse: collapse;
            background-color: white;
        }
        th, td {
            padding: 10px;
            border: 1px solid #ddd;
            text-align: left;
        }
        th {
            background-color: #f2f2f2;
            font-weight: bold;
        }
        tr:nth-child(even) {
            background-color: #f9f9f9;
        }
        tr:hover {
            background-color: #f1f1f1;
        }
        .key-field {
            font-weight: bold;
            color: #e74c3c;
        }
        .foreign-key {
            color: #3498db;
            font-style: italic;
        }
        /* 响应式设计 */
        @media (max-width: 768px) {
            .domain-model-container {
                flex-direction: column;
                align-items: center;
            }
            .entity {
                width: 90%;
            }
            .application-item {
                width: 100%;
            }
        }
    </style>
</head>
<body>
    <h1>无人机供需撮合平台领域模型图</h1>

    <section>
        <h2>1. 领域模型概述</h2>
        <p>领域模型是对特定业务领域的概念性表示，它描述了系统中的核心实体、这些实体之间的关系以及它们的行为和规则。本文档基于数据库表设计，展示无人机供需撮合平台的核心业务概念及其相互关系。</p>
    </section>

    <section>
        <h2>2. 核心领域实体</h2>
        <div class="domain-model-container">
            <!-- 用户实体 -->
            <div class="entity">
                <div class="entity-header">用户 (user)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">username</span>
                        <span class="attribute-type">varchar(50)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">password</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">phone</span>
                        <span class="attribute-type">varchar(20)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">email</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">real_name</span>
                        <span class="attribute-type">varchar(50)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">credit_score</span>
                        <span class="attribute-type">int</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 资质认证实体 -->
            <div class="entity">
                <div class="entity-header">资质认证 (qualification)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">cert_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">cert_no</span>
                        <span class="attribute-type">varchar(50)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">cert_image</span>
                        <span class="attribute-type">varchar(200)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">valid_start</span>
                        <span class="attribute-type">date</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">valid_end</span>
                        <span class="attribute-type">date</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 设备实体 -->
            <div class="entity">
                <div class="entity-header">设备 (device)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">device_name</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">device_model</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">device_sn</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">device_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">max_load</span>
                        <span class="attribute-type">decimal(10,2)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 服务实体 -->
            <div class="entity">
                <div class="entity-header">服务 (service)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">device_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">service_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">service_name</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">price_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">price</span>
                        <span class="attribute-type">decimal(10,2)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">service_area</span>
                        <span class="attribute-type">geometry</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 需求实体 -->
            <div class="entity">
                <div class="entity-header">需求 (demand)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">demand_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">demand_title</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">location</span>
                        <span class="attribute-type">point</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">start_time</span>
                        <span class="attribute-type">datetime</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">budget</span>
                        <span class="attribute-type">decimal(10,2)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 订单实体 -->
            <div class="entity">
                <div class="entity-header">订单 (order)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">order_no</span>
                        <span class="attribute-type">varchar(50)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">demand_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">service_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">demand_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">supply_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">order_amount</span>
                        <span class="attribute-type">decimal(10,2)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 支付实体 -->
            <div class="entity">
                <div class="entity-header">支付 (payment)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">order_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">payment_no</span>
                        <span class="attribute-type">varchar(50)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">payment_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">payment_amount</span>
                        <span class="attribute-type">decimal(10,2)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">payment_purpose</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">payment_status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 评价实体 -->
            <div class="entity">
                <div class="entity-header">评价 (evaluation)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">order_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">from_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">to_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">score</span>
                        <span class="attribute-type">int</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">content</span>
                        <span class="attribute-type">varchar(500)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">reply_content</span>
                        <span class="attribute-type">varchar(500)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 消息实体 -->
            <div class="entity">
                <div class="entity-header">消息 (message)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">session_id</span>
                        <span class="attribute-type">varchar(50) (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">from_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">to_user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">message_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">content</span>
                        <span class="attribute-type">text</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">read_status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 会话实体 -->
            <div class="entity">
                <div class="entity-header">会话 (chat_session)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">varchar(50) (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id_1</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id_2</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">last_message_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">last_message_content</span>
                        <span class="attribute-type">varchar(200)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">unread_count_1</span>
                        <span class="attribute-type">int</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">unread_count_2</span>
                        <span class="attribute-type">int</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>

            <!-- 系统通知实体 -->
            <div class="entity">
                <div class="entity-header">系统通知 (system_notification)</div>
                <div class="entity-body">
                    <div class="entity-attribute">
                        <span class="attribute-name">id</span>
                        <span class="attribute-type">bigint (PK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">user_id</span>
                        <span class="attribute-type">bigint (FK)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">title</span>
                        <span class="attribute-type">varchar(100)</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">content</span>
                        <span class="attribute-type">text</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">notification_type</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">read_status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                    <div class="entity-attribute">
                        <span class="attribute-name">push_status</span>
                        <span class="attribute-type">tinyint</span>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <section>
        <h2>3. 实体关系图</h2>
        <div class="relationship-container">
            <svg width="100%" height="600" style="background-color: white; border: 1px solid #ddd; border-radius: 8px;">
                <!-- 用户与资质认证关系 -->
                <rect x="50" y="50" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="110" y="85" text-anchor="middle" fill="white" font-weight="bold">用户</text>
                
                <rect x="250" y="50" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="310" y="85" text-anchor="middle" fill="white" font-weight="bold">资质认证</text>
                
                <line x1="170" y1="80" x2="250" y2="80" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="240,75 250,80 240,85" fill="#2c3e50"></polygon>
                <text x="210" y="70" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 用户与设备关系 -->
                <rect x="50" y="150" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="110" y="185" text-anchor="middle" fill="white" font-weight="bold">用户</text>
                
                <rect x="250" y="150" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="310" y="185" text-anchor="middle" fill="white" font-weight="bold">设备</text>
                
                <line x1="170" y1="180" x2="250" y2="180" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="240,175 250,180 240,185" fill="#2c3e50"></polygon>
                <text x="210" y="170" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 设备与服务关系 -->
                <rect x="450" y="150" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="510" y="185" text-anchor="middle" fill="white" font-weight="bold">服务</text>
                
                <line x1="370" y1="180" x2="450" y2="180" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="440,175 450,180 440,185" fill="#2c3e50"></polygon>
                <text x="410" y="170" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 用户与需求关系 -->
                <rect x="50" y="250" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="110" y="285" text-anchor="middle" fill="white" font-weight="bold">用户</text>
                
                <rect x="250" y="250" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="310" y="285" text-anchor="middle" fill="white" font-weight="bold">需求</text>
                
                <line x1="170" y1="280" x2="250" y2="280" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="240,275 250,280 240,285" fill="#2c3e50"></polygon>
                <text x="210" y="270" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 需求与订单关系 -->
                <rect x="450" y="250" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="510" y="285" text-anchor="middle" fill="white" font-weight="bold">订单</text>
                
                <line x1="370" y1="280" x2="450" y2="280" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="440,275 450,280 440,285" fill="#2c3e50"></polygon>
                <text x="410" y="270" text-anchor="middle" fill="#2c3e50" font-size="12">1:1</text>
                
                <!-- 服务与订单关系 -->
                <line x1="510" y1="210" x2="510" y2="250" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="505,240 510,250 515,240" fill="#2c3e50"></polygon>
                <text x="525" y="230" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 订单与支付关系 -->
                <rect x="650" y="250" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="710" y="285" text-anchor="middle" fill="white" font-weight="bold">支付</text>
                
                <line x1="570" y1="280" x2="650" y2="280" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="640,275 650,280 640,285" fill="#2c3e50"></polygon>
                <text x="610" y="270" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 订单与评价关系 -->
                <rect x="450" y="350" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="510" y="385" text-anchor="middle" fill="white" font-weight="bold">评价</text>
                
                <line x1="510" y1="310" x2="510" y2="350" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="505,340 510,350 515,340" fill="#2c3e50"></polygon>
                <text x="525" y="330" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 用户与消息关系 -->
                <rect x="50" y="350" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="110" y="385" text-anchor="middle" fill="white" font-weight="bold">用户</text>
                
                <rect x="250" y="350" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="310" y="385" text-anchor="middle" fill="white" font-weight="bold">消息</text>
                
                <line x1="170" y1="380" x2="250" y2="380" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="240,375 250,380 240,385" fill="#2c3e50"></polygon>
                <text x="210" y="370" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 用户与会话关系 -->
                <rect x="50" y="450" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="110" y="485" text-anchor="middle" fill="white" font-weight="bold">用户</text>
                
                <rect x="250" y="450" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="310" y="485" text-anchor="middle" fill="white" font-weight="bold">会话</text>
                
                <path d="M 110,450 Q 110,430 180,430 Q 250,430 250,450" stroke="#2c3e50" stroke-width="2" fill="none"></path>
                <polygon points="245,445 250,450 245,455" fill="#2c3e50"></polygon>
                <text x="180" y="420" text-anchor="middle" fill="#2c3e50" font-size="12">N:M</text>
                
                <!-- 会话与消息关系 -->
                <line x1="310" y1="410" x2="310" y2="450" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="305,440 310,450 315,440" fill="#2c3e50"></polygon>
                <text x="325" y="430" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
                
                <!-- 用户与系统通知关系 -->
                <rect x="450" y="450" width="120" height="60" fill="#3498db" rx="5" ry="5"></rect>
                <text x="510" y="485" text-anchor="middle" fill="white" font-weight="bold">系统通知</text>
                
                <line x1="170" y1="480" x2="450" y2="480" stroke="#2c3e50" stroke-width="2"></line>
                <polygon points="440,475 450,480 440,485" fill="#2c3e50"></polygon>
                <text x="310" y="470" text-anchor="middle" fill="#2c3e50" font-size="12">1:N</text>
            </svg>
        </div>

        <h3>3.1 实体关系说明</h3>
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>关系</th>
                        <th>类型</th>
                        <th>说明</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>用户 - 资质认证</td>
                        <td>一对多</td>
                        <td>一个用户可以有多个资质认证（如操作证、设备登记证等）</td>
                    </tr>
                    <tr>
                        <td>用户 - 设备</td>
                        <td>一对多</td>
                        <td>一个用户可以拥有多个无人机设备</td>
                    </tr>
                    <tr>
                        <td>设备 - 服务</td>
                        <td>一对多</td>
                        <td>一个设备可以提供多种服务（如航拍、货运、巡检等）</td>
                    </tr>
                    <tr>
                        <td>用户 - 需求</td>
                        <td>一对多</td>
                        <td>一个用户可以发布多个需求</td>
                    </tr>
                    <tr>
                        <td>需求 - 订单</td>
                        <td>一对一</td>
                        <td>一个需求对应一个订单</td>
                    </tr>
                    <tr>
                        <td>服务 - 订单</td>
                        <td>一对多</td>
                        <td>一个服务可以关联多个订单</td>
                    </tr>
                    <tr>
                        <td>订单 - 支付</td>
                        <td>一对多</td>
                        <td>一个订单可以有多条支付记录（预付款、尾款等）</td>
                    </tr>
                    <tr>
                        <td>订单 - 评价</td>
                        <td>一对多</td>
                        <td>一个订单可以有多条评价（供需双方互评）</td>
                    </tr>
                    <tr>
                        <td>用户 - 消息</td>
                        <td>一对多</td>
                        <td>一个用户可以发送和接收多条消息</td>
                    </tr>
                    <tr>
                        <td>用户 - 会话</td>
                        <td>多对多</td>
                        <td>用户之间可以建立多个会话</td>
                    </tr>
                    <tr>
                        <td>会话 - 消息</td>
                        <td>一对多</td>
                        <td>一个会话包含多条消息</td>
                    </tr>
                    <tr>
                        <td>用户 - 系统通知</td>
                        <td>一对多</td>
                        <td>一个用户可以接收多条系统通知</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section>
        <h2>4. 领域行为与业务规则</h2>
        <div class="rules-container">
            <div class="rule-category">
                <h3>4.1 用户管理</h3>
                <ul class="rule-list">
                    <li>用户注册需要验证手机号或邮箱</li>
                    <li>企业用户需要提供营业执照等资质认证</li>
                    <li>用户可以管理自己的设备和服务</li>
                    <li>用户信用分影响接单和下单权限</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.2 设备管理</h3>
                <ul class="rule-list">
                    <li>设备需要通过平台审核才能上线</li>
                    <li>设备所有者需要定期更新设备状态</li>
                    <li>设备需要满足安全和合规要求</li>
                    <li>设备登记证需要在有效期内</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.3 服务发布</h3>
                <ul class="rule-list">
                    <li>服务提供者可以设置服务的可用时间和地点</li>
                    <li>服务价格可以根据市场需求动态调整</li>
                    <li>服务可以设置预约规则和取消政策</li>
                    <li>服务区域需要符合法规要求（避开禁飞区）</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.4 需求匹配</h3>
                <ul class="rule-list">
                    <li>系统根据需求条件自动匹配合适的服务</li>
                    <li>需求发布者可以从匹配结果中选择服务</li>
                    <li>匹配算法考虑距离、价格、评分等多种因素</li>
                    <li>加急需求可以获得优先匹配权</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.5 订单处理</h3>
                <ul class="rule-list">
                    <li>订单创建后需要在规定时间内支付定金</li>
                    <li>服务完成后需要支付尾款</li>
                    <li>订单可以在服务开始前取消，但可能产生违约金</li>
                    <li>订单状态变更需要双方确认</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.6 支付流程</h3>
                <ul class="rule-list">
                    <li>支持多种支付方式：微信、支付宝、银行卡</li>
                    <li>支付分为预付款和尾款两部分</li>
                    <li>退款需要根据平台规则和取消时间处理</li>
                    <li>平台收取一定比例的服务费</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.7 评价系统</h3>
                <ul class="rule-list">
                    <li>订单完成后双方可以互相评价</li>
                    <li>评价会影响用户和服务的综合评分</li>
                    <li>恶意评价可以申请平台介入处理</li>
                    <li>服务提供者可以回复评价</li>
                </ul>
            </div>

            <div class="rule-category">
                <h3>4.8 消息通知</h3>
                <ul class="rule-list">
                    <li>订单状态变更时系统自动发送通知</li>
                    <li>用户可以通过消息系统进行沟通</li>
                    <li>重要系统通知会通过多种渠道推送</li>
                    <li>会话支持未读消息统计和最新消息预览</li>
                </ul>
            </div>
        </div>
    </section>

    <section>
        <h2>5. 领域模型与数据库映射</h2>
        <p>领域模型中的实体直接映射到数据库表，实体之间的关系通过外键约束实现。主要映射关系如下：</p>
        
        <div class="table-container">
            <table>
                <thead>
                    <tr>
                        <th>领域实体</th>
                        <th>数据库表</th>
                        <th>主要外键关系</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>用户</td>
                        <td>user</td>
                        <td>-</td>
                    </tr>
                    <tr>
                        <td>资质认证</td>
                        <td>qualification</td>
                        <td>qualification.user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>设备</td>
                        <td>device</td>
                        <td>device.user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>服务</td>
                        <td>service</td>
                        <td>service.user_id → user.id<br>service.device_id → device.id</td>
                    </tr>
                    <tr>
                        <td>需求</td>
                        <td>demand</td>
                        <td>demand.user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>订单</td>
                        <td>order</td>
                        <td>order.demand_id → demand.id<br>order.service_id → service.id<br>order.demand_user_id → user.id<br>order.supply_user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>支付</td>
                        <td>payment</td>
                        <td>payment.order_id → order.id<br>payment.user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>评价</td>
                        <td>evaluation</td>
                        <td>evaluation.order_id → order.id<br>evaluation.from_user_id → user.id<br>evaluation.to_user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>消息</td>
                        <td>message</td>
                        <td>message.session_id → chat_session.id<br>message.from_user_id → user.id<br>message.to_user_id → user.id</td>
                    </tr>
                    <tr>
                        <td>会话</td>
                        <td>chat_session</td>
                        <td>chat_session.user_id_1 → user.id<br>chat_session.user_id_2 → user.id<br>chat_session.last_message_id → message.id</td>
                    </tr>
                    <tr>
                        <td>系统通知</td>
                        <td>system_notification</td>
                        <td>system_notification.user_id → user.id</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </section>

    <section>
        <h2>6. 结论</h2>
        <p>本领域模型图基于数据库表设计，全面描述了无人机供需撮合平台的核心业务概念及其关系，为系统设计和开发提供了清晰的指导。领域模型与数据库模型的紧密映射，确保了业务逻辑与数据存储的一致性，有助于实现高效、可靠的系统功能。</p>
    </section>

    <footer>
        <p>无人机供需撮合平台领域模型图 © 2023</p>
    </footer>
</body>
</html>