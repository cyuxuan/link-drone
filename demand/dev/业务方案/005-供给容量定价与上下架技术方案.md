# 005-供给容量定价与上下架技术方案

## 目标
- 供给方可管理容量与价格策略，安全执行上下架。

## 业务流程
- 容量调整：验证不可为负 → 更新并记录审计。
- 定价修改：检查最小/最大门槛与步进 → 更新并通知关注者（可选）。
- 上下架：状态机 `DRAFT → PUBLISHED → UNPUBLISHED`。

## 接口设计
- `POST /supply/{id}/capacity`，`POST /supply/{id}/price`，`POST /supply/{id}/publish`，`POST /supply/{id}/unpublish`。

## 数据模型
- `supply_price_history(id, supply_id, old_price, new_price, changed_at, changed_by)`

## 规则与校验
- 频繁改价限制；上下架需要拥有者或管理员权限；状态流转合法性。

## 验收标准
- 容量与价格更新可追踪；上下架流程严格遵循状态机。