# 限流与熔断策略技术方案

## 目标
- 防止突发流量与下游故障导致系统雪崩，提升稳定性与弹性。

## 技术选型
- 网关：`RedisRateLimiter`（基于令牌桶）。
- 熔断/降级：`Sentinel` 或 `Resilience4j`（服务级容错）。

## 限流设计
- 维度：IP、用户、接口、路由 `id`。
- 规则示例：`/api/order/**` 每用户 `10 req/s`，`/api/search/**` 每IP `20 req/s`。
- 超限处理：`429` + 友好提示，记录审计日志。

## 熔断与降级
- 指标：错误率、平均延迟、并发数；自动进入半开恢复。
- 降级策略：返回缓存/兜底数据或提示稍后重试。

## 监控与配置
- 动态规则：配置中心管理，热更新。
- 指标上报：Prometheus + Grafana 展示命中率/拒绝率/熔断次数。

## 验收标准
- 压测下限流规则稳定生效；下游故障时整体可用性保持。